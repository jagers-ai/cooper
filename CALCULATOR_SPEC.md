## 폐모터 수익 계산기 v1 설계

### 1. 목표

- 폐모터 구입 금액(월 기준)을 입력하면, 금속 수율·단가·인건비를 반영한 예상 월/연 매출과 이익(인건비 전/후)을 계산해주는 단일 페이지 계산기를 만든다.
- 스택: HTML + CSS + TypeScript (TS 코드는 tsc 로 빌드해서 브라우저에서는 JS만 로딩한다).

---

### 2. 입력값 및 기본값

모든 금액 단위는 원, 무게 단위는 kg, 비율은 %로 통일한다.

- **월 투자금 (원)**
  - 설명: 한 달 동안 폐모터를 구입하는 데 사용하는 총 금액.
  - 기본값: 없음 (사용자가 매번 직접 입력).

- **폐모터 매입 단가 (원/kg)**
  - 설명: 폐모터를 kg당 얼마에 사는지.
  - 기본값: 700.
  - 입력 방식:
    - 텍스트 입력.
    - 슬라이더(10원 단위 증감).

- **구리 판매 단가 (원/kg)**
  - 기본값: 12,000.

- **철 판매 단가 (원/kg)**
  - 기본값: 400.

- **알루미늄 판매 단가 (원/kg)**
  - 기본값: 2,000.

- **구리 수율 (%)**
  - 설명: 폐모터 전체 중량 대비 구리 권선 비율.
    - 예: 폐모터 100kg, 구리 수율 10% → 구리 10kg.
  - 기본값: 10.

- **알루미늄 모터 비율 (%)**
  - 설명: 폐모터 전체 중량 대비 알루미늄 권선 비율.
    - 예: 폐모터 100kg, 알루미늄 모터 비율 20%, 구리 수율 10% → 알루미늄 20kg, 구리 10kg, 나머지 70kg은 철로 본다.
  - 기본값: 10.
  - 입력 방식:
    - 텍스트 입력.
    - 슬라이더(1% 단위 증감).

- **월 인건비 (원)**
  - 설명: 이 작업 전체에 들어가는 한 달 기준 인건비(원하면 인력비, 임대료 등을 모두 포함한 값).
  - 기본값: 없음 (사용자가 매번 직접 입력).

---

### 3. 계산 로직

1. **총 폐모터 중량(kg)**

   - `총 폐모터 중량 = 월 투자금 ÷ 폐모터 매입 단가`

2. **각 금속별 중량(kg)**

   - `구리 중량 = 총 폐모터 중량 × (구리 수율 / 100)`
   - `알루미늄 중량 = 총 폐모터 중량 × (알루미늄 모터 비율 / 100)`
   - `철 중량 = 총 폐모터 중량 − 구리 중량 − 알루미늄 중량`
   - 나머지 중량은 모두 철로 가정한다.

3. **각 금속별 매출(원)**

   - `구리 매출 = 구리 중량 × 구리 판매 단가`
   - `알루미늄 매출 = 알루미늄 중량 × 알루미늄 판매 단가`
   - `철 매출 = 철 중량 × 철 판매 단가`

4. **월 기준 매출 및 이익(원)**

   - `월 총매출 = 구리 매출 + 알루미늄 매출 + 철 매출`
   - `월 매출이익(인건비 전) = 월 총매출 − 월 투자금`
   - `월 순이익 = 월 매출이익(인건비 전) − 월 인건비`

5. **연 기준 매출 및 이익(원)**

   - `연 총매출 = 월 총매출 × 12`
   - `연 매출이익(인건비 전) = 월 매출이익(인건비 전) × 12`
   - `연 순이익 = 월 순이익 × 12`

6. **손익분기점(폐모터 매입 단가)**

   - 손익분기점에서의 조건: 월 순이익 = 0.
   - 이 조건을 이용해, 나머지 입력값(수율, 판매 단가, 인건비 등)이 고정된 상태에서
     손익분기점 폐모터 매입 단가(원/kg)를 역으로 계산해 UI에 표시한다.
   - 결과 표시 예시:
     - `손익분기점 폐모터 매입 단가: xxx원/kg`
     - `이 단가 이상이면 적자입니다.` 같은 안내 문구.

---

### 4. UI 및 인터랙션

1. **레이아웃 개요**

- 상단: **기본 설정**
  - 월 투자금.
  - 폐모터 매입 단가(텍스트 입력 + 10원 단위 슬라이더).
  - 구리 수율(%), 알루미늄 모터 비율(%)(텍스트 입력 + 1% 단위 슬라이더).
  - 구리/철/알루미늄 판매 단가.

- 중단: **비용 설정**
  - 월 인건비.

- 하단: **결과 영역**
  - 월/연 기준 요약 카드:
    - 월 총매출, 월 매출이익(인건비 전), 월 순이익.
    - 연 총매출, 연 매출이익, 연 순이익.
  - 상세 표:
    - 총 폐모터 중량, 금속별 중량(구리/알루미늄/철)과 각 금속별 매출.
  - 손익분기점 표시:
    - 손익분기점 폐모터 매입 단가와 안내 문구.

2. **슬라이더 동작**

- 알루미늄 모터 비율 슬라이더 (1% 단위):
  - 슬라이더를 움직일 때마다 모든 결과(월/연 매출, 이익, 손익분기점)가 즉시 재계산된다.
  - 알루미늄 비율이 높아질수록 이익이 어떻게 변하는지 직관적으로 확인할 수 있다.

- 폐모터 매입 단가 슬라이더 (10원 단위):
  - 단가를 올리고 내릴 때마다, 매출이익·순이익 및 손익분기점과의 차이가 실시간으로 업데이트된다.

3. **프리셋 기능 (시세 저장)**

- 사용자가 현재 입력값 세트를 이름과 함께 저장할 수 있다.
  - 예: "2025-03 시세", "A업체 기준" 등.
- 저장된 프리셋 목록에서 하나를 선택하면, 모든 입력값이 해당 프리셋 값으로 일괄 변경된다.
- 프리셋 목록에서 개별 프리셋을 선택해 삭제할 수 있는 삭제 기능(버튼 또는 메뉴)을 제공한다.
- 저장소는 브라우저 `localStorage`를 사용하며, 데이터는 로컬 브라우저에만 저장된다.

---

### 5. 개발 편의: `scrap` alias

터미널에서 매번 긴 명령을 치지 않고, `scrap` 한 번으로 개발/확인 흐름을 자동화한다.

#### 5.1 목표

- 터미널에서 아래 명령 한 줄로:

  ```bash
  scrap
  ```

- 다음 작업이 순서대로 실행되도록 한다.
  1. 프로젝트 디렉터리로 이동: `/home/jinsan/projects/cooper`.
  2. TypeScript 개발용 watch 모드 실행: `tsc --watch` 또는 `npm run dev`.
  3. 개발 서버 또는 빌드된 `index.html`을 브라우저에서 연다.

#### 5.2 예상 구현 개요

- `~/.bashrc` 또는 별도 쉘 설정 파일에 alias 추가:
  - `cd /home/jinsan/projects/cooper`.
  - TypeScript watch 모드 실행:
    - 예: `npx tsc --watch` 또는 `npm run dev`.
    - 이 명령은 개발 중 내내 실행 상태를 유지하며, `.ts` 파일이 변경될 때마다 자동으로 JS를 다시 생성한다.
  - 개발 서버가 없다면, 결과 HTML 파일을 브라우저로 열기:
    - WSL 환경에 맞는 명령 사용:
      - 예: `wslview index.html`, `explorer.exe index.html`, `xdg-open index.html` 중 환경에 맞는 것을 선택.

- 실제 구현 시에는:
  - 한 번 alias를 정의해 두면,
  - 이후에는 `scrap`만 입력해도 최신 코드로 빌드된 계산기를 바로 브라우저에서 확인할 수 있다.

---

### 6. GitHub 이슈 및 브랜치/PR 계획

- GitHub 이슈 (예시 제목)
  - `폐모터 수익 계산기 v1 설계 및 초기 세팅 (HTML + CSS + TypeScript)`

- 이 이슈에서 다루는 범위:
  - 입력값/기본값 정의.
  - 계산 로직 및 손익분기점 정의.
  - UI 레이아웃 및 슬라이더/프리셋/손익분기점 UX 정의.
  - `scrap` alias를 통한 개발 편의 플로우 정의.

- 브랜치:
  - 예시: `feat/scrap-calculator-spec`.
  - 이 브랜치에서 본 문서(CALCULATOR_SPEC.md) 추가 및 README 정리 후 PR 생성.
